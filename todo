1. separate unittest and build
2. add options to disable unittest and build
